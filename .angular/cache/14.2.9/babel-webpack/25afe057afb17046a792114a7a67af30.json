{"ast":null,"code":"import _asyncToGenerator from \"C:/Users/victo/OneDrive/Escritorio/TFG/TFG-C\\xF3digo/Frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport { FormControl, Validators } from '@angular/forms';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/forms\";\nimport * as i2 from \"@angular/material/core\";\nimport * as i3 from \"../../services/auth.service\";\nimport * as i4 from \"@angular/router\";\nimport * as i5 from \"@angular/common\";\nimport * as i6 from \"@angular/material/icon\";\nimport * as i7 from \"@angular/material/button\";\nimport * as i8 from \"@angular/material/form-field\";\nimport * as i9 from \"@angular/material/input\";\nimport * as i10 from \"@angular/material/stepper\";\nimport * as i11 from \"@angular/material/datepicker\";\nimport * as i12 from \"ngx-material-file-input\";\n\nfunction RegistroComponent_ng_template_4_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵtext(0, \"Datos personales\");\n  }\n}\n\nfunction RegistroComponent_ng_template_27_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵtext(0, \"Configuraci\\u00F3n de inicio de sesi\\u00F3n\");\n  }\n}\n\nfunction RegistroComponent_div_30_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\")(1, \"h4\", 25);\n    i0.ɵɵtext(2, \" La contrase\\u00F1a debe tener 6 caracteres m\\u00EDnimo. \");\n    i0.ɵɵelementEnd()();\n  }\n}\n\nfunction RegistroComponent_ng_template_51_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵtext(0, \"Terminar\");\n  }\n}\n\nfunction RegistroComponent_div_52_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\")(1, \"h3\", 26);\n    i0.ɵɵtext(2, \" \\u00A1Has rellenado todos los datos! Pulsa en continuar para registrar tu cuenta. \");\n    i0.ɵɵelementEnd()();\n  }\n}\n\nfunction RegistroComponent_ng_template_53_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"h3\", 25);\n    i0.ɵɵtext(1, \" Faltan campos requeridos por rellenar. Asegurate de que est\\u00E1n rellenados. \");\n    i0.ɵɵelementEnd();\n  }\n}\n\nexport class RegistroComponent {\n  constructor(_formBuilder, date, authService, router) {\n    this._formBuilder = _formBuilder;\n    this.date = date;\n    this.authService = authService;\n    this.router = router;\n    this.hide = true;\n    this.hideRepetida = true;\n    this.camposVacios = true;\n    this.datosPersonales = this._formBuilder.group({\n      nombre: [],\n      fechaNacimiento: [],\n      fotografia: []\n    });\n    this.inicioSesion = this._formBuilder.group({\n      email: [],\n      password: new FormControl('', [Validators.required, Validators.minLength(6)]),\n      passwordRepetida: []\n    }); // Ponemos en los calendarios el lunes como primer día\n\n    date.getFirstDayOfWeek = () => 1;\n  }\n\n  compruebaCamposVacios() {\n    const nulosDatosPersonales = Object.values(this.datosPersonales.controls).some(control => control.value === null);\n    console.log(nulosDatosPersonales);\n    const nulosInicioSesion = Object.values(this.inicioSesion.controls).some(control => control.value === null);\n    console.log(nulosInicioSesion);\n    return nulosDatosPersonales && nulosInicioSesion;\n  }\n\n  creaUsuario() {\n    var _this = this;\n\n    return _asyncToGenerator(function* () {\n      if (!_this.compruebaCamposVacios()) {\n        _this.camposVacios = false;\n        (yield _this.authService.registraUsuario(_this.datosPersonales, _this.inicioSesion)).subscribe(resp => {\n          _this.router.navigateByUrl('auth/login');\n        });\n      }\n    })();\n  }\n\n}\n\nRegistroComponent.ɵfac = function RegistroComponent_Factory(t) {\n  return new (t || RegistroComponent)(i0.ɵɵdirectiveInject(i1.FormBuilder), i0.ɵɵdirectiveInject(i2.DateAdapter), i0.ɵɵdirectiveInject(i3.AuthService), i0.ɵɵdirectiveInject(i4.Router));\n};\n\nRegistroComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: RegistroComponent,\n  selectors: [[\"app-registro\"]],\n  decls: 60,\n  vars: 19,\n  consts: [[1, \"relleno\", 3, \"linear\"], [\"stepper\", \"\"], [3, \"stepControl\"], [3, \"formGroup\"], [\"matStepLabel\", \"\"], [\"autocomplete\", \"off\", \"matInput\", \"\", \"placeholder\", \"Nombre\", \"formControlName\", \"nombre\", \"required\", \"\"], [\"color\", \"accent\", \"appearance\", \"fill\"], [\"matInput\", \"\", \"formControlName\", \"fechaNacimiento\", \"datePickerFormat\", \"DD/MM/YYYY\", \"readonly\", \"\", \"required\", \"\", 3, \"matDatepicker\"], [\"matSuffix\", \"\", 3, \"for\"], [\"fechaNacimiento\", \"\"], [\"type\", \"file\", \"name\", \"fotografia\", \"enctype\", \"multipart/form-data\", \"formControlName\", \"fotografia\", \"placeholder\", \"Imagen de perfil (JPG)\", 3, \"accept\"], [\"matSuffix\", \"\", 1, \"carpeta\"], [\"mat-raised-button\", \"\", \"color\", \"primary\", \"matStepperNext\", \"\"], [1, \"inicio_sesion\", 3, \"formGroup\"], [\"matInput\", \"\", \"placeholder\", \"tucorreo@dominio.com\", \"formControlName\", \"email\", \"required\", \"\"], [4, \"ngIf\"], [\"appearance\", \"fill\"], [\"type\", \"password\", \"formControlName\", \"password\", \"matInput\", \"\", \"required\", \"\", 3, \"type\"], [\"type\", \"button\", \"mat-icon-button\", \"\", \"matSuffix\", \"\", 3, \"click\"], [\"type\", \"password\", \"formControlName\", \"passwordRepetida\", \"matInput\", \"\", \"required\", \"\", 3, \"type\"], [\"mat-raised-button\", \"\", \"color\", \"primary\", \"matStepperPrevious\", \"\"], [\"mat-raised-button\", \"\", \"color\", \"primary\", \"matStepperNext\", \"\", 1, \"boton_derecho\"], [4, \"ngIf\", \"ngIfElse\"], [\"elementoOculto\", \"\"], [\"mat-raised-button\", \"\", \"color\", \"primary\", 1, \"boton_derecho\", 3, \"click\"], [1, \"terminarError\"], [1, \"terminar\"]],\n  template: function RegistroComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵelementStart(0, \"mat-vertical-stepper\", 0, 1)(2, \"mat-step\", 2)(3, \"form\", 3);\n      i0.ɵɵtemplate(4, RegistroComponent_ng_template_4_Template, 1, 0, \"ng-template\", 4);\n      i0.ɵɵelementStart(5, \"mat-form-field\");\n      i0.ɵɵelement(6, \"input\", 5);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(7, \"mat-form-field\", 6)(8, \"mat-label\");\n      i0.ɵɵtext(9, \"Fecha de nacimiento\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelement(10, \"input\", 7);\n      i0.ɵɵelementStart(11, \"mat-hint\");\n      i0.ɵɵtext(12, \"MM/DD/YYYY\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelement(13, \"mat-datepicker-toggle\", 8)(14, \"mat-datepicker\", null, 9);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(16, \"mat-form-field\");\n      i0.ɵɵelement(17, \"ngx-mat-file-input\", 10);\n      i0.ɵɵelementStart(18, \"mat-icon\", 11);\n      i0.ɵɵtext(19, \"folder_shared\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(20, \"mat-hint\");\n      i0.ɵɵtext(21, \"Opcional\");\n      i0.ɵɵelementEnd()();\n      i0.ɵɵelementStart(22, \"div\")(23, \"button\", 12);\n      i0.ɵɵtext(24, \" Siguiente \");\n      i0.ɵɵelementEnd()()()();\n      i0.ɵɵelementStart(25, \"mat-step\", 2)(26, \"form\", 13);\n      i0.ɵɵtemplate(27, RegistroComponent_ng_template_27_Template, 1, 0, \"ng-template\", 4);\n      i0.ɵɵelementStart(28, \"mat-form-field\");\n      i0.ɵɵelement(29, \"input\", 14);\n      i0.ɵɵelementEnd();\n      i0.ɵɵtemplate(30, RegistroComponent_div_30_Template, 3, 0, \"div\", 15);\n      i0.ɵɵelementStart(31, \"mat-form-field\", 16)(32, \"mat-label\");\n      i0.ɵɵtext(33, \"Introduce tu contrase\\u00F1a\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelement(34, \"input\", 17);\n      i0.ɵɵelementStart(35, \"button\", 18);\n      i0.ɵɵlistener(\"click\", function RegistroComponent_Template_button_click_35_listener() {\n        return ctx.hide = !ctx.hide;\n      });\n      i0.ɵɵelementStart(36, \"mat-icon\");\n      i0.ɵɵtext(37);\n      i0.ɵɵelementEnd()()();\n      i0.ɵɵelementStart(38, \"mat-form-field\", 16)(39, \"mat-label\");\n      i0.ɵɵtext(40, \"Repite tu contrase\\u00F1a\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelement(41, \"input\", 19);\n      i0.ɵɵelementStart(42, \"button\", 18);\n      i0.ɵɵlistener(\"click\", function RegistroComponent_Template_button_click_42_listener() {\n        return ctx.hideRepetida = !ctx.hideRepetida;\n      });\n      i0.ɵɵelementStart(43, \"mat-icon\");\n      i0.ɵɵtext(44);\n      i0.ɵɵelementEnd()()();\n      i0.ɵɵelementStart(45, \"div\")(46, \"button\", 20);\n      i0.ɵɵtext(47, \" Atr\\u00E1s \");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(48, \"button\", 21);\n      i0.ɵɵtext(49, \" Siguiente \");\n      i0.ɵɵelementEnd()()()();\n      i0.ɵɵelementStart(50, \"mat-step\");\n      i0.ɵɵtemplate(51, RegistroComponent_ng_template_51_Template, 1, 0, \"ng-template\", 4);\n      i0.ɵɵtemplate(52, RegistroComponent_div_52_Template, 3, 0, \"div\", 22);\n      i0.ɵɵtemplate(53, RegistroComponent_ng_template_53_Template, 2, 0, \"ng-template\", null, 23, i0.ɵɵtemplateRefExtractor);\n      i0.ɵɵelementStart(55, \"div\")(56, \"button\", 20);\n      i0.ɵɵtext(57, \" Atr\\u00E1s \");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(58, \"button\", 24);\n      i0.ɵɵlistener(\"click\", function RegistroComponent_Template_button_click_58_listener() {\n        return ctx.creaUsuario();\n      });\n      i0.ɵɵtext(59, \" Continuar \");\n      i0.ɵɵelementEnd()()()();\n    }\n\n    if (rf & 2) {\n      const _r2 = i0.ɵɵreference(15);\n\n      const _r7 = i0.ɵɵreference(54);\n\n      i0.ɵɵproperty(\"linear\", false);\n      i0.ɵɵadvance(2);\n      i0.ɵɵproperty(\"stepControl\", ctx.datosPersonales);\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"formGroup\", ctx.datosPersonales);\n      i0.ɵɵadvance(7);\n      i0.ɵɵproperty(\"matDatepicker\", _r2);\n      i0.ɵɵadvance(3);\n      i0.ɵɵproperty(\"for\", _r2);\n      i0.ɵɵadvance(4);\n      i0.ɵɵproperty(\"accept\", \".jpg\");\n      i0.ɵɵadvance(8);\n      i0.ɵɵproperty(\"stepControl\", ctx.inicioSesion);\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"formGroup\", ctx.inicioSesion);\n      i0.ɵɵadvance(4);\n      i0.ɵɵproperty(\"ngIf\", ctx.inicioSesion.invalid && ctx.inicioSesion.touched);\n      i0.ɵɵadvance(4);\n      i0.ɵɵproperty(\"type\", ctx.hide ? \"password\" : \"text\");\n      i0.ɵɵadvance(1);\n      i0.ɵɵattribute(\"aria-label\", \"Hide password\")(\"aria-pressed\", ctx.hide);\n      i0.ɵɵadvance(2);\n      i0.ɵɵtextInterpolate(ctx.hide ? \"visibility_off\" : \"visibility\");\n      i0.ɵɵadvance(4);\n      i0.ɵɵproperty(\"type\", ctx.hideRepetida ? \"password\" : \"text\");\n      i0.ɵɵadvance(1);\n      i0.ɵɵattribute(\"aria-label\", \"Hide password\")(\"aria-pressed\", ctx.hideRepetida);\n      i0.ɵɵadvance(2);\n      i0.ɵɵtextInterpolate(ctx.hideRepetida ? \"visibility_off\" : \"visibility\");\n      i0.ɵɵadvance(8);\n      i0.ɵɵproperty(\"ngIf\", !ctx.camposVacios)(\"ngIfElse\", _r7);\n    }\n  },\n  dependencies: [i5.NgIf, i1.ɵNgNoValidate, i1.DefaultValueAccessor, i1.NgControlStatus, i1.NgControlStatusGroup, i1.RequiredValidator, i1.FormGroupDirective, i1.FormControlName, i6.MatIcon, i7.MatButton, i8.MatFormField, i8.MatHint, i8.MatLabel, i8.MatSuffix, i9.MatInput, i10.MatStep, i10.MatStepLabel, i10.MatStepper, i10.MatStepperNext, i10.MatStepperPrevious, i11.MatDatepicker, i11.MatDatepickerInput, i11.MatDatepickerToggle, i12.FileInputComponent],\n  styles: [\".example-input-wrapper[_ngcontent-%COMP%] {\\r\\n    margin-bottom: 16px;\\r\\n  }\\r\\n  \\r\\n  label[_ngcontent-%COMP%] {\\r\\n    margin-right: 4px;\\r\\n  }\\r\\n  \\r\\n  .relleno[_ngcontent-%COMP%]{\\r\\n    height: 100%;\\r\\n    width: 100%;\\r\\n  }\\r\\n  \\r\\n  mat-form-field[_ngcontent-%COMP%]{\\r\\n    margin-left: 5%;\\r\\n  }\\r\\n  \\r\\n  .carpeta[_ngcontent-%COMP%]{\\r\\n    transform: scale(1.35);\\r\\n    color:white;\\r\\n  }\\r\\n  \\r\\n  mat-icon[_ngcontent-%COMP%]{\\r\\n    color:white;\\r\\n  }\\r\\n  \\r\\n  input[_ngcontent-%COMP%]{\\r\\n    color:white;\\r\\n  }\\r\\n  \\r\\n  ngx-mat-file-input[_ngcontent-%COMP%]{\\r\\n    color:white;\\r\\n  }\\r\\n  \\r\\n  .boton_derecho[_ngcontent-%COMP%]{\\r\\n    margin-left:10px;\\r\\n  }\\r\\n  \\r\\n  button[_ngcontent-%COMP%]{\\r\\n    margin-top: 5px;\\r\\n  }\\r\\n  \\r\\n  .terminar[_ngcontent-%COMP%]{\\r\\n    color: white;\\r\\n  }\\r\\n  \\r\\n  .terminarError[_ngcontent-%COMP%]{\\r\\n    color: red;\\r\\n  }\\r\\n  \\r\\n  .validacionContrasenia[_ngcontent-%COMP%]{\\r\\n    color:red;\\r\\n    margin-top: 50%;\\r\\n  }\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInJlZ2lzdHJvLmNvbXBvbmVudC5jc3MiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7SUFDSSxtQkFBbUI7RUFDckI7O0VBRUE7SUFDRSxpQkFBaUI7RUFDbkI7O0VBRUE7SUFDRSxZQUFZO0lBQ1osV0FBVztFQUNiOztFQUVBO0lBQ0UsZUFBZTtFQUNqQjs7RUFFQTtJQUNFLHNCQUFzQjtJQUN0QixXQUFXO0VBQ2I7O0VBQ0E7SUFDRSxXQUFXO0VBQ2I7O0VBRUE7SUFDRSxXQUFXO0VBQ2I7O0VBQ0E7SUFDRSxXQUFXO0VBQ2I7O0VBRUE7SUFDRSxnQkFBZ0I7RUFDbEI7O0VBRUE7SUFDRSxlQUFlO0VBQ2pCOztFQUVBO0lBQ0UsWUFBWTtFQUNkOztFQUVBO0lBQ0UsVUFBVTtFQUNaOztFQUVBO0lBQ0UsU0FBUztJQUNULGVBQWU7RUFDakIiLCJmaWxlIjoicmVnaXN0cm8uY29tcG9uZW50LmNzcyIsInNvdXJjZXNDb250ZW50IjpbIi5leGFtcGxlLWlucHV0LXdyYXBwZXIge1xyXG4gICAgbWFyZ2luLWJvdHRvbTogMTZweDtcclxuICB9XHJcbiAgXHJcbiAgbGFiZWwge1xyXG4gICAgbWFyZ2luLXJpZ2h0OiA0cHg7XHJcbiAgfVxyXG5cclxuICAucmVsbGVub3tcclxuICAgIGhlaWdodDogMTAwJTtcclxuICAgIHdpZHRoOiAxMDAlO1xyXG4gIH1cclxuXHJcbiAgbWF0LWZvcm0tZmllbGR7XHJcbiAgICBtYXJnaW4tbGVmdDogNSU7XHJcbiAgfVxyXG5cclxuICAuY2FycGV0YXtcclxuICAgIHRyYW5zZm9ybTogc2NhbGUoMS4zNSk7XHJcbiAgICBjb2xvcjp3aGl0ZTtcclxuICB9XHJcbiAgbWF0LWljb257XHJcbiAgICBjb2xvcjp3aGl0ZTtcclxuICB9XHJcblxyXG4gIGlucHV0e1xyXG4gICAgY29sb3I6d2hpdGU7XHJcbiAgfVxyXG4gIG5neC1tYXQtZmlsZS1pbnB1dHtcclxuICAgIGNvbG9yOndoaXRlO1xyXG4gIH1cclxuXHJcbiAgLmJvdG9uX2RlcmVjaG97XHJcbiAgICBtYXJnaW4tbGVmdDoxMHB4O1xyXG4gIH1cclxuXHJcbiAgYnV0dG9ue1xyXG4gICAgbWFyZ2luLXRvcDogNXB4O1xyXG4gIH1cclxuXHJcbiAgLnRlcm1pbmFye1xyXG4gICAgY29sb3I6IHdoaXRlO1xyXG4gIH1cclxuXHJcbiAgLnRlcm1pbmFyRXJyb3J7XHJcbiAgICBjb2xvcjogcmVkO1xyXG4gIH1cclxuXHJcbiAgLnZhbGlkYWNpb25Db250cmFzZW5pYXtcclxuICAgIGNvbG9yOnJlZDtcclxuICAgIG1hcmdpbi10b3A6IDUwJTtcclxuICB9Il19 */\"]\n});","map":{"version":3,"mappings":"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","names":["FormControl","Validators","i0","RegistroComponent","constructor","_formBuilder","date","authService","router","group","nombre","fechaNacimiento","fotografia","email","password","required","minLength","passwordRepetida","getFirstDayOfWeek","compruebaCamposVacios","nulosDatosPersonales","Object","values","datosPersonales","controls","some","control","value","console","log","nulosInicioSesion","inicioSesion","creaUsuario","camposVacios","registraUsuario","subscribe","resp","navigateByUrl","selectors","decls","vars","consts","template","ctx","_r7"],"sourceRoot":"","sources":["C:\\Users\\victo\\OneDrive\\Escritorio\\TFG\\TFG-Código\\Frontend\\src\\app\\auth\\pages\\registro\\registro.component.ts","C:\\Users\\victo\\OneDrive\\Escritorio\\TFG\\TFG-Código\\Frontend\\src\\app\\auth\\pages\\registro\\registro.component.html"],"sourcesContent":["import { Component } from '@angular/core';\nimport {\n  FormBuilder,\n  FormControl,\n  FormGroup,\n  Validators,\n} from '@angular/forms';\nimport { DateAdapter } from '@angular/material/core';\nimport { Router } from '@angular/router';\nimport { AuthService } from '../../services/auth.service';\n\n@Component({\n  selector: 'app-registro',\n  templateUrl: './registro.component.html',\n  styleUrls: ['./registro.component.css'],\n})\nexport class RegistroComponent {\n  hide: boolean = true;\n  hideRepetida: boolean = true;\n  camposVacios: boolean = true;\n  constructor(\n    private _formBuilder: FormBuilder,\n    private date: DateAdapter<Date>,\n    private authService: AuthService,\n    private router: Router\n  ) {\n    // Ponemos en los calendarios el lunes como primer día\n    date.getFirstDayOfWeek = () => 1;\n  }\n  datosPersonales: FormGroup = this._formBuilder.group({\n    nombre: [],\n    fechaNacimiento: [],\n    fotografia: [],\n  });\n\n  inicioSesion: FormGroup = this._formBuilder.group({\n    email: [],\n    password: new FormControl('', [\n      Validators.required,\n      Validators.minLength(6),\n    ]),\n    passwordRepetida: [],\n  });\n\n  compruebaCamposVacios(): boolean {\n    const nulosDatosPersonales = Object.values(\n      this.datosPersonales.controls\n    ).some((control) => control.value === null);\n    console.log(nulosDatosPersonales);\n\n    const nulosInicioSesion = Object.values(this.inicioSesion.controls).some(\n      (control) => control.value === null\n    );\n    console.log(nulosInicioSesion);\n\n    return nulosDatosPersonales && nulosInicioSesion;\n  }\n\n  async creaUsuario() {\n    if (!this.compruebaCamposVacios()) {\n      this.camposVacios = false;\n      (\n        await this.authService.registraUsuario(\n          this.datosPersonales,\n          this.inicioSesion\n        )\n      ).subscribe((resp) => {\n        this.router.navigateByUrl('auth/login');\n      });\n    }\n  }\n}\n","<mat-vertical-stepper [linear]=\"false\" #stepper class=\"relleno\">\n  <mat-step [stepControl]=\"datosPersonales\">\n    <form [formGroup]=\"datosPersonales\">\n      <ng-template matStepLabel>Datos personales</ng-template>\n      <mat-form-field>\n        <input\n          autocomplete=\"off\"\n          matInput\n          placeholder=\"Nombre\"\n          formControlName=\"nombre\"\n          required\n        />\n      </mat-form-field>\n      <mat-form-field color=\"accent\" appearance=\"fill\">\n        <mat-label>Fecha de nacimiento</mat-label>\n        <input\n          matInput\n          [matDatepicker]=\"fechaNacimiento\"\n          formControlName=\"fechaNacimiento\"\n          datePickerFormat=\"DD/MM/YYYY\"\n          readonly\n          required\n        />\n        <mat-hint>MM/DD/YYYY</mat-hint>\n        <mat-datepicker-toggle\n          matSuffix\n          [for]=\"fechaNacimiento\"\n        ></mat-datepicker-toggle>\n        <mat-datepicker #fechaNacimiento></mat-datepicker>\n      </mat-form-field>\n      <mat-form-field>\n        <ngx-mat-file-input\n          type=\"file\"\n          name=\"fotografia\"\n          enctype=\"multipart/form-data\"\n          formControlName=\"fotografia\"\n          placeholder=\"Imagen de perfil (JPG)\"\n          [accept]=\"'.jpg'\"\n        ></ngx-mat-file-input>\n        <mat-icon matSuffix class=\"carpeta\">folder_shared</mat-icon>\n        <mat-hint>Opcional</mat-hint>\n      </mat-form-field>\n\n      <div>\n        <button mat-raised-button color=\"primary\" matStepperNext>\n          Siguiente\n        </button>\n      </div>\n    </form>\n  </mat-step>\n  <mat-step [stepControl]=\"inicioSesion\">\n    <form [formGroup]=\"inicioSesion\" class=\"inicio_sesion\">\n      <ng-template matStepLabel>Configuración de inicio de sesión</ng-template>\n      <mat-form-field>\n        <input\n          matInput\n          placeholder=\"tucorreo@dominio.com\"\n          formControlName=\"email\"\n          required\n        />\n      </mat-form-field>\n      <div *ngIf=\"inicioSesion.invalid && inicioSesion.touched\">\n        <h4 class=\"terminarError\">\n          La contraseña debe tener 6 caracteres mínimo.\n        </h4>\n      </div>\n      <mat-form-field appearance=\"fill\">\n        <mat-label>Introduce tu contraseña</mat-label>\n        <input\n          type=\"password\"\n          formControlName=\"password\"\n          matInput\n          [type]=\"hide ? 'password' : 'text'\"\n          required=\"\"\n        />\n        <button\n          type=\"button\"\n          mat-icon-button\n          matSuffix\n          (click)=\"hide = !hide\"\n          [attr.aria-label]=\"'Hide password'\"\n          [attr.aria-pressed]=\"hide\"\n        >\n          <mat-icon>{{ hide ? \"visibility_off\" : \"visibility\" }}</mat-icon>\n        </button>\n      </mat-form-field>\n      <mat-form-field appearance=\"fill\">\n        <mat-label>Repite tu contraseña</mat-label>\n        <input\n          type=\"password\"\n          formControlName=\"passwordRepetida\"\n          matInput\n          [type]=\"hideRepetida ? 'password' : 'text'\"\n          required=\"\"\n        />\n        <button\n          type=\"button\"\n          mat-icon-button\n          matSuffix\n          (click)=\"hideRepetida = !hideRepetida\"\n          [attr.aria-label]=\"'Hide password'\"\n          [attr.aria-pressed]=\"hideRepetida\"\n        >\n          <mat-icon>{{\n            hideRepetida ? \"visibility_off\" : \"visibility\"\n          }}</mat-icon>\n        </button>\n      </mat-form-field>\n      <div>\n        <button mat-raised-button color=\"primary\" matStepperPrevious>\n          Atrás\n        </button>\n        <button\n          mat-raised-button\n          color=\"primary\"\n          matStepperNext\n          class=\"boton_derecho\"\n        >\n          Siguiente\n        </button>\n      </div>\n    </form>\n  </mat-step>\n  <mat-step>\n    <ng-template matStepLabel>Terminar</ng-template>\n    <div *ngIf=\"!camposVacios; else elementoOculto\">\n      <h3 class=\"terminar\">\n        ¡Has rellenado todos los datos! Pulsa en continuar para registrar tu\n        cuenta.\n      </h3>\n    </div>\n    <ng-template #elementoOculto>\n      <h3 class=\"terminarError\">\n        Faltan campos requeridos por rellenar. Asegurate de que están\n        rellenados.\n      </h3></ng-template\n    >\n\n    <div>\n      <button mat-raised-button color=\"primary\" matStepperPrevious>\n        Atrás\n      </button>\n      <button\n        mat-raised-button\n        color=\"primary\"\n        (click)=\"creaUsuario()\"\n        class=\"boton_derecho\"\n      >\n        Continuar\n      </button>\n    </div>\n  </mat-step>\n</mat-vertical-stepper>\n"]},"metadata":{},"sourceType":"module"}