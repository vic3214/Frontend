{"ast":null,"code":"import _asyncToGenerator from \"C:/Users/victo/OneDrive/Escritorio/TFG/TFG-C\\xF3digo/Frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport { FormControl, Validators } from '@angular/forms';\nimport { FileValidator } from 'ngx-material-file-input';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/forms\";\nimport * as i2 from \"@angular/material/core\";\nimport * as i3 from \"../../services/auth.service\";\nimport * as i4 from \"@angular/router\";\nimport * as i5 from \"@angular/common\";\nimport * as i6 from \"@angular/material/icon\";\nimport * as i7 from \"@angular/material/button\";\nimport * as i8 from \"@angular/material/form-field\";\nimport * as i9 from \"@angular/material/input\";\nimport * as i10 from \"@angular/material/stepper\";\nimport * as i11 from \"@angular/material/datepicker\";\nimport * as i12 from \"ngx-material-file-input\";\nfunction RegistroComponent_ng_template_4_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵtext(0, \"Datos personales\");\n  }\n}\nfunction RegistroComponent_ng_template_27_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵtext(0, \"Configuraci\\u00F3n de inicio de sesi\\u00F3n\");\n  }\n}\nfunction RegistroComponent_div_30_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\")(1, \"h4\", 25);\n    i0.ɵɵtext(2, \"El correo debe estar bien formado\");\n    i0.ɵɵelementEnd()();\n  }\n}\nfunction RegistroComponent_div_35_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\")(1, \"h4\", 25);\n    i0.ɵɵtext(2, \" La contrase\\u00F1a debe tener 6 caracteres m\\u00EDnimo. \");\n    i0.ɵɵelementEnd()();\n  }\n}\nfunction RegistroComponent_ng_template_52_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵtext(0, \"Terminar\");\n  }\n}\nfunction RegistroComponent_div_53_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\")(1, \"h3\", 26);\n    i0.ɵɵtext(2, \" \\u00A1Has rellenado todos los datos! Pulsa en continuar para registrar tu cuenta. \");\n    i0.ɵɵelementEnd()();\n  }\n}\nfunction RegistroComponent_ng_template_54_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"h3\", 25);\n    i0.ɵɵtext(1, \" Faltan campos requeridos por rellenar. Asegurate de que est\\u00E1n rellenados. \");\n    i0.ɵɵelementEnd();\n  }\n}\nexport class RegistroComponent {\n  constructor(_formBuilder, date, authService, router) {\n    this._formBuilder = _formBuilder;\n    this.date = date;\n    this.authService = authService;\n    this.router = router;\n    this.hide = true;\n    this.hideRepetida = true;\n    this.datosPersonales = this._formBuilder.group({\n      nombre: [],\n      fechaNacimiento: [],\n      fotografia: ['', [FileValidator.maxContentSize(20000)]]\n    });\n    this.inicioSesion = this._formBuilder.group({\n      email: [],\n      password: new FormControl('', [Validators.required, Validators.minLength(6)]),\n      passwordRepetida: []\n    });\n    // Ponemos en los calendarios el lunes como primer día\n    date.getFirstDayOfWeek = () => 1;\n  }\n  get password() {\n    return this.inicioSesion.get('password');\n  }\n  get email() {\n    return this.inicioSesion.get('email');\n  }\n  creaUsuario() {\n    var _this = this;\n    return _asyncToGenerator(function* () {\n      if (_this.datosPersonales.valid && _this.inicioSesion.valid) {\n        (yield _this.authService.registraUsuario(_this.datosPersonales, _this.inicioSesion)).subscribe(resp => {\n          _this.router.navigateByUrl('auth/login');\n        });\n      }\n    })();\n  }\n}\nRegistroComponent.ɵfac = function RegistroComponent_Factory(t) {\n  return new (t || RegistroComponent)(i0.ɵɵdirectiveInject(i1.FormBuilder), i0.ɵɵdirectiveInject(i2.DateAdapter), i0.ɵɵdirectiveInject(i3.AuthService), i0.ɵɵdirectiveInject(i4.Router));\n};\nRegistroComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: RegistroComponent,\n  selectors: [[\"app-registro\"]],\n  decls: 61,\n  vars: 20,\n  consts: [[1, \"relleno\", 3, \"linear\"], [\"stepper\", \"\"], [3, \"stepControl\"], [3, \"formGroup\"], [\"matStepLabel\", \"\"], [\"autocomplete\", \"off\", \"matInput\", \"\", \"placeholder\", \"Nombre\", \"formControlName\", \"nombre\", \"required\", \"\"], [\"color\", \"accent\", \"appearance\", \"fill\"], [\"matInput\", \"\", \"formControlName\", \"fechaNacimiento\", \"datePickerFormat\", \"DD/MM/YYYY\", \"readonly\", \"\", \"required\", \"\", 3, \"matDatepicker\"], [\"matSuffix\", \"\", 3, \"for\"], [\"fechaNacimiento\", \"\"], [\"type\", \"file\", \"name\", \"fotografia\", \"enctype\", \"multipart/form-data\", \"formControlName\", \"fotografia\", \"placeholder\", \"Imagen de perfil (JPG)\", \"maxContentSize\", \"20000\", 3, \"accept\"], [\"matSuffix\", \"\", 1, \"carpeta\"], [\"mat-raised-button\", \"\", \"color\", \"primary\", \"matStepperNext\", \"\"], [1, \"inicio_sesion\", 3, \"formGroup\"], [\"matInput\", \"\", \"placeholder\", \"tucorreo@dominio.com\", \"formControlName\", \"email\", \"pattern\", \"[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\\\\.[a-zA-Z]{2,}\", \"required\", \"\"], [4, \"ngIf\"], [\"appearance\", \"fill\"], [\"type\", \"password\", \"formControlName\", \"password\", \"matInput\", \"\", \"required\", \"\", 3, \"type\"], [\"type\", \"button\", \"mat-icon-button\", \"\", \"matSuffix\", \"\", 3, \"click\"], [\"type\", \"password\", \"formControlName\", \"passwordRepetida\", \"matInput\", \"\", \"required\", \"\", 3, \"type\"], [\"mat-raised-button\", \"\", \"color\", \"primary\", \"matStepperPrevious\", \"\"], [\"mat-raised-button\", \"\", \"color\", \"primary\", \"matStepperNext\", \"\", 1, \"boton_derecho\"], [4, \"ngIf\", \"ngIfElse\"], [\"elementoOculto\", \"\"], [\"mat-raised-button\", \"\", \"color\", \"primary\", 1, \"boton_derecho\", 3, \"click\"], [1, \"terminarError\"], [1, \"terminar\"]],\n  template: function RegistroComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵelementStart(0, \"mat-vertical-stepper\", 0, 1)(2, \"mat-step\", 2)(3, \"form\", 3);\n      i0.ɵɵtemplate(4, RegistroComponent_ng_template_4_Template, 1, 0, \"ng-template\", 4);\n      i0.ɵɵelementStart(5, \"mat-form-field\");\n      i0.ɵɵelement(6, \"input\", 5);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(7, \"mat-form-field\", 6)(8, \"mat-label\");\n      i0.ɵɵtext(9, \"Fecha de nacimiento\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelement(10, \"input\", 7);\n      i0.ɵɵelementStart(11, \"mat-hint\");\n      i0.ɵɵtext(12, \"MM/DD/YYYY\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelement(13, \"mat-datepicker-toggle\", 8)(14, \"mat-datepicker\", null, 9);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(16, \"mat-form-field\");\n      i0.ɵɵelement(17, \"ngx-mat-file-input\", 10);\n      i0.ɵɵelementStart(18, \"mat-icon\", 11);\n      i0.ɵɵtext(19, \"folder_shared\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(20, \"mat-hint\");\n      i0.ɵɵtext(21, \"Opcional\");\n      i0.ɵɵelementEnd()();\n      i0.ɵɵelementStart(22, \"div\")(23, \"button\", 12);\n      i0.ɵɵtext(24, \" Siguiente \");\n      i0.ɵɵelementEnd()()()();\n      i0.ɵɵelementStart(25, \"mat-step\", 2)(26, \"form\", 13);\n      i0.ɵɵtemplate(27, RegistroComponent_ng_template_27_Template, 1, 0, \"ng-template\", 4);\n      i0.ɵɵelementStart(28, \"mat-form-field\");\n      i0.ɵɵelement(29, \"input\", 14);\n      i0.ɵɵtemplate(30, RegistroComponent_div_30_Template, 3, 0, \"div\", 15);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(31, \"mat-form-field\", 16)(32, \"mat-label\");\n      i0.ɵɵtext(33, \"Introduce tu contrase\\u00F1a\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelement(34, \"input\", 17);\n      i0.ɵɵtemplate(35, RegistroComponent_div_35_Template, 3, 0, \"div\", 15);\n      i0.ɵɵelementStart(36, \"button\", 18);\n      i0.ɵɵlistener(\"click\", function RegistroComponent_Template_button_click_36_listener() {\n        return ctx.hide = !ctx.hide;\n      });\n      i0.ɵɵelementStart(37, \"mat-icon\");\n      i0.ɵɵtext(38);\n      i0.ɵɵelementEnd()()();\n      i0.ɵɵelementStart(39, \"mat-form-field\", 16)(40, \"mat-label\");\n      i0.ɵɵtext(41, \"Repite tu contrase\\u00F1a\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelement(42, \"input\", 19);\n      i0.ɵɵelementStart(43, \"button\", 18);\n      i0.ɵɵlistener(\"click\", function RegistroComponent_Template_button_click_43_listener() {\n        return ctx.hideRepetida = !ctx.hideRepetida;\n      });\n      i0.ɵɵelementStart(44, \"mat-icon\");\n      i0.ɵɵtext(45);\n      i0.ɵɵelementEnd()()();\n      i0.ɵɵelementStart(46, \"div\")(47, \"button\", 20);\n      i0.ɵɵtext(48, \" Atr\\u00E1s \");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(49, \"button\", 21);\n      i0.ɵɵtext(50, \" Siguiente \");\n      i0.ɵɵelementEnd()()()();\n      i0.ɵɵelementStart(51, \"mat-step\");\n      i0.ɵɵtemplate(52, RegistroComponent_ng_template_52_Template, 1, 0, \"ng-template\", 4);\n      i0.ɵɵtemplate(53, RegistroComponent_div_53_Template, 3, 0, \"div\", 22);\n      i0.ɵɵtemplate(54, RegistroComponent_ng_template_54_Template, 2, 0, \"ng-template\", null, 23, i0.ɵɵtemplateRefExtractor);\n      i0.ɵɵelementStart(56, \"div\")(57, \"button\", 20);\n      i0.ɵɵtext(58, \" Atr\\u00E1s \");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(59, \"button\", 24);\n      i0.ɵɵlistener(\"click\", function RegistroComponent_Template_button_click_59_listener() {\n        return ctx.creaUsuario();\n      });\n      i0.ɵɵtext(60, \" Continuar \");\n      i0.ɵɵelementEnd()()()();\n    }\n    if (rf & 2) {\n      const _r2 = i0.ɵɵreference(15);\n      const _r8 = i0.ɵɵreference(55);\n      i0.ɵɵproperty(\"linear\", false);\n      i0.ɵɵadvance(2);\n      i0.ɵɵproperty(\"stepControl\", ctx.datosPersonales);\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"formGroup\", ctx.datosPersonales);\n      i0.ɵɵadvance(7);\n      i0.ɵɵproperty(\"matDatepicker\", _r2);\n      i0.ɵɵadvance(3);\n      i0.ɵɵproperty(\"for\", _r2);\n      i0.ɵɵadvance(4);\n      i0.ɵɵproperty(\"accept\", \".jpg\");\n      i0.ɵɵadvance(8);\n      i0.ɵɵproperty(\"stepControl\", ctx.inicioSesion);\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"formGroup\", ctx.inicioSesion);\n      i0.ɵɵadvance(4);\n      i0.ɵɵproperty(\"ngIf\", ctx.email.invalid && ctx.inicioSesion.touched);\n      i0.ɵɵadvance(4);\n      i0.ɵɵproperty(\"type\", ctx.hide ? \"password\" : \"text\");\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"ngIf\", ctx.password.invalid && ctx.inicioSesion.touched);\n      i0.ɵɵadvance(1);\n      i0.ɵɵattribute(\"aria-label\", \"Hide password\")(\"aria-pressed\", ctx.hide);\n      i0.ɵɵadvance(2);\n      i0.ɵɵtextInterpolate(ctx.hide ? \"visibility_off\" : \"visibility\");\n      i0.ɵɵadvance(4);\n      i0.ɵɵproperty(\"type\", ctx.hideRepetida ? \"password\" : \"text\");\n      i0.ɵɵadvance(1);\n      i0.ɵɵattribute(\"aria-label\", \"Hide password\")(\"aria-pressed\", ctx.hideRepetida);\n      i0.ɵɵadvance(2);\n      i0.ɵɵtextInterpolate(ctx.hideRepetida ? \"visibility_off\" : \"visibility\");\n      i0.ɵɵadvance(8);\n      i0.ɵɵproperty(\"ngIf\", ctx.inicioSesion.valid && ctx.datosPersonales.valid)(\"ngIfElse\", _r8);\n    }\n  },\n  dependencies: [i5.NgIf, i1.ɵNgNoValidate, i1.DefaultValueAccessor, i1.NgControlStatus, i1.NgControlStatusGroup, i1.RequiredValidator, i1.PatternValidator, i1.FormGroupDirective, i1.FormControlName, i6.MatIcon, i7.MatButton, i8.MatFormField, i8.MatHint, i8.MatLabel, i8.MatSuffix, i9.MatInput, i10.MatStep, i10.MatStepLabel, i10.MatStepper, i10.MatStepperNext, i10.MatStepperPrevious, i11.MatDatepicker, i11.MatDatepickerInput, i11.MatDatepickerToggle, i12.FileInputComponent],\n  styles: [\".example-input-wrapper[_ngcontent-%COMP%] {\\r\\n    margin-bottom: 16px;\\r\\n  }\\r\\n  \\r\\n  label[_ngcontent-%COMP%] {\\r\\n    margin-right: 4px;\\r\\n  }\\r\\n\\r\\n  .relleno[_ngcontent-%COMP%]{\\r\\n    height: 100%;\\r\\n    width: 100%;\\r\\n  }\\r\\n\\r\\n  mat-form-field[_ngcontent-%COMP%]{\\r\\n    margin-left: 5%;\\r\\n  }\\r\\n\\r\\n  .carpeta[_ngcontent-%COMP%]{\\r\\n    transform: scale(1.35);\\r\\n    color:white;\\r\\n  }\\r\\n  mat-icon[_ngcontent-%COMP%]{\\r\\n    color:white;\\r\\n  }\\r\\n\\r\\n  input[_ngcontent-%COMP%]{\\r\\n    color:white;\\r\\n  }\\r\\n  ngx-mat-file-input[_ngcontent-%COMP%]{\\r\\n    color:white;\\r\\n  }\\r\\n\\r\\n  .boton_derecho[_ngcontent-%COMP%]{\\r\\n    margin-left:10px;\\r\\n  }\\r\\n\\r\\n  button[_ngcontent-%COMP%]{\\r\\n    margin-top: 5px;\\r\\n  }\\r\\n\\r\\n  .terminar[_ngcontent-%COMP%]{\\r\\n    color: white;\\r\\n  }\\r\\n\\r\\n  .terminarError[_ngcontent-%COMP%]{\\r\\n    color: red;\\r\\n  }\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8uL3NyYy9hcHAvYXV0aC9wYWdlcy9yZWdpc3Ryby9yZWdpc3Ryby5jb21wb25lbnQuY3NzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0lBQ0ksbUJBQW1CO0VBQ3JCOztFQUVBO0lBQ0UsaUJBQWlCO0VBQ25COztFQUVBO0lBQ0UsWUFBWTtJQUNaLFdBQVc7RUFDYjs7RUFFQTtJQUNFLGVBQWU7RUFDakI7O0VBRUE7SUFDRSxzQkFBc0I7SUFDdEIsV0FBVztFQUNiO0VBQ0E7SUFDRSxXQUFXO0VBQ2I7O0VBRUE7SUFDRSxXQUFXO0VBQ2I7RUFDQTtJQUNFLFdBQVc7RUFDYjs7RUFFQTtJQUNFLGdCQUFnQjtFQUNsQjs7RUFFQTtJQUNFLGVBQWU7RUFDakI7O0VBRUE7SUFDRSxZQUFZO0VBQ2Q7O0VBRUE7SUFDRSxVQUFVO0VBQ1oiLCJzb3VyY2VzQ29udGVudCI6WyIuZXhhbXBsZS1pbnB1dC13cmFwcGVyIHtcclxuICAgIG1hcmdpbi1ib3R0b206IDE2cHg7XHJcbiAgfVxyXG4gIFxyXG4gIGxhYmVsIHtcclxuICAgIG1hcmdpbi1yaWdodDogNHB4O1xyXG4gIH1cclxuXHJcbiAgLnJlbGxlbm97XHJcbiAgICBoZWlnaHQ6IDEwMCU7XHJcbiAgICB3aWR0aDogMTAwJTtcclxuICB9XHJcblxyXG4gIG1hdC1mb3JtLWZpZWxke1xyXG4gICAgbWFyZ2luLWxlZnQ6IDUlO1xyXG4gIH1cclxuXHJcbiAgLmNhcnBldGF7XHJcbiAgICB0cmFuc2Zvcm06IHNjYWxlKDEuMzUpO1xyXG4gICAgY29sb3I6d2hpdGU7XHJcbiAgfVxyXG4gIG1hdC1pY29ue1xyXG4gICAgY29sb3I6d2hpdGU7XHJcbiAgfVxyXG5cclxuICBpbnB1dHtcclxuICAgIGNvbG9yOndoaXRlO1xyXG4gIH1cclxuICBuZ3gtbWF0LWZpbGUtaW5wdXR7XHJcbiAgICBjb2xvcjp3aGl0ZTtcclxuICB9XHJcblxyXG4gIC5ib3Rvbl9kZXJlY2hve1xyXG4gICAgbWFyZ2luLWxlZnQ6MTBweDtcclxuICB9XHJcblxyXG4gIGJ1dHRvbntcclxuICAgIG1hcmdpbi10b3A6IDVweDtcclxuICB9XHJcblxyXG4gIC50ZXJtaW5hcntcclxuICAgIGNvbG9yOiB3aGl0ZTtcclxuICB9XHJcblxyXG4gIC50ZXJtaW5hckVycm9ye1xyXG4gICAgY29sb3I6IHJlZDtcclxuICB9XHJcbiJdLCJzb3VyY2VSb290IjoiIn0= */\"]\n});","map":{"version":3,"mappings":";AACA,SAEEA,WAAW,EAEXC,UAAU,QACL,gBAAgB;AAGvB,SAASC,aAAa,QAAQ,yBAAyB;;;;;;;;;;;;;;;;ICNvBC,gCAAgB;;;;;IAkDhBA,2DAAiC;;;;;IASzDA,2BAAoD;IACxBA,iDAAiC;IAAAA,iBAAK;;;;;IAYlEA,2BAAuD;IAEnDA,yEACF;IAAAA,iBAAK;;;;;IAmDeA,wBAAQ;;;;;IAClCA,2BAEC;IAEGA,mGAEF;IAAAA,iBAAK;;;;;IAGLA,8BAA0B;IACxBA,gGAEF;IAAAA,iBAAK;;;AD7HX,OAAM,MAAOC,iBAAiB;EAI5BC,YACUC,YAAyB,EACzBC,IAAuB,EACvBC,WAAwB,EACxBC,MAAc;IAHd,iBAAY,GAAZH,YAAY;IACZ,SAAI,GAAJC,IAAI;IACJ,gBAAW,GAAXC,WAAW;IACX,WAAM,GAANC,MAAM;IAPhB,SAAI,GAAY,IAAI;IACpB,iBAAY,GAAY,IAAI;IAW5B,oBAAe,GAAc,IAAI,CAACH,YAAY,CAACI,KAAK,CAAC;MACnDC,MAAM,EAAE,EAAE;MACVC,eAAe,EAAE,EAAE;MACnBC,UAAU,EAAE,CAAC,EAAE,EAAE,CAACX,aAAa,CAACY,cAAc,CAAC,KAAK,CAAC,CAAC;KACvD,CAAC;IAEF,iBAAY,GAAc,IAAI,CAACR,YAAY,CAACI,KAAK,CAAC;MAChDK,KAAK,EAAE,EAAE;MACTC,QAAQ,EAAE,IAAIhB,WAAW,CAAC,EAAE,EAAE,CAC5BC,UAAU,CAACgB,QAAQ,EACnBhB,UAAU,CAACiB,SAAS,CAAC,CAAC,CAAC,CACxB,CAAC;MACFC,gBAAgB,EAAE;KACnB,CAAC;IAhBA;IACAZ,IAAI,CAACa,iBAAiB,GAAG,MAAM,CAAC;EAClC;EAgBA,IAAIJ,QAAQ;IACV,OAAO,IAAI,CAACK,YAAY,CAACC,GAAG,CAAC,UAAU,CAAC;EAC1C;EAEA,IAAIP,KAAK;IACP,OAAO,IAAI,CAACM,YAAY,CAACC,GAAG,CAAC,OAAO,CAAC;EACvC;EAEMC,WAAW;IAAA;IAAA;MACf,IAAI,KAAI,CAACC,eAAe,CAACC,KAAK,IAAI,KAAI,CAACJ,YAAY,CAACI,KAAK,EAAE;QACzD,OACQ,KAAI,CAACjB,WAAW,CAACkB,eAAe,CACpC,KAAI,CAACF,eAAe,EACpB,KAAI,CAACH,YAAY,CAClB,EACDM,SAAS,CAAEC,IAAI,IAAI;UACnB,KAAI,CAACnB,MAAM,CAACoB,aAAa,CAAC,YAAY,CAAC;QACzC,CAAC,CAAC;;IACH;EACH;;AA/CWzB,iBAAiB;mBAAjBA,iBAAiB;AAAA;AAAjBA,iBAAiB;QAAjBA,iBAAiB;EAAA0B;EAAAC;EAAAC;EAAAC;EAAAC;IAAA;MCjB9B/B,kDAAgE;MAG1DA,kFAAwD;MACxDA,sCAAgB;MACdA,2BAME;MACJA,iBAAiB;MACjBA,yCAAiD;MACpCA,mCAAmB;MAAAA,iBAAY;MAC1CA,4BAOE;MACFA,iCAAU;MAAAA,2BAAU;MAAAA,iBAAW;MAC/BA,4CAGyB;MAE3BA,iBAAiB;MACjBA,uCAAgB;MACdA,0CAQsB;MACtBA,qCAAoC;MAAAA,8BAAa;MAAAA,iBAAW;MAC5DA,iCAAU;MAAAA,yBAAQ;MAAAA,iBAAW;MAG/BA,4BAAK;MAEDA,4BACF;MAAAA,iBAAS;MAIfA,oCAAuC;MAEnCA,oFAAyE;MACzEA,uCAAgB;MACdA,6BAME;MACFA,qEAEM;MACRA,iBAAiB;MACjBA,2CAAkC;MACrBA,6CAAuB;MAAAA,iBAAY;MAC9CA,6BAME;MACFA,qEAIM;MACNA,mCAOC;MAHCA;QAAA;MAAA,EAAsB;MAItBA,iCAAU;MAAAA,aAA4C;MAAAA,iBAAW;MAGrEA,2CAAkC;MACrBA,0CAAoB;MAAAA,iBAAY;MAC3CA,6BAME;MACFA,mCAOC;MAHCA;QAAA;MAAA,EAAsC;MAItCA,iCAAU;MAAAA,aAER;MAAAA,iBAAW;MAGjBA,4BAAK;MAEDA,6BACF;MAAAA,iBAAS;MACTA,mCAKC;MACCA,4BACF;MAAAA,iBAAS;MAIfA,iCAAU;MACRA,oFAAgD;MAChDA,qEAOM;MACNA,sHAKC;MAEDA,4BAAK;MAEDA,6BACF;MAAAA,iBAAS;MACTA,mCAKC;MAFCA;QAAA,OAASgC,iBAAa;MAAA,EAAC;MAGvBhC,4BACF;MAAAA,iBAAS;;;;;MA5JOA,8BAAgB;MAC1BA,eAA+B;MAA/BA,iDAA+B;MACjCA,eAA6B;MAA7BA,+CAA6B;MAe7BA,eAAiC;MAAjCA,mCAAiC;MASjCA,eAAuB;MAAvBA,yBAAuB;MAWvBA,eAAiB;MAAjBA,+BAAiB;MAcfA,eAA4B;MAA5BA,8CAA4B;MAC9BA,eAA0B;MAA1BA,4CAA0B;MAUtBA,eAA4C;MAA5CA,oEAA4C;MAUhDA,eAAmC;MAAnCA,qDAAmC;MAG/BA,eAA+C;MAA/CA,uEAA+C;MAUnDA,eAAmC;MAAnCA,6CAAmC;MAGzBA,eAA4C;MAA5CA,gEAA4C;MAStDA,eAA2C;MAA3CA,6DAA2C;MAQ3CA,eAAmC;MAAnCA,6CAAmC;MAGzBA,eAER;MAFQA,wEAER;MAqBLA,eAAmD;MAAnDA,0EAAmD","names":["FormControl","Validators","FileValidator","i0","RegistroComponent","constructor","_formBuilder","date","authService","router","group","nombre","fechaNacimiento","fotografia","maxContentSize","email","password","required","minLength","passwordRepetida","getFirstDayOfWeek","inicioSesion","get","creaUsuario","datosPersonales","valid","registraUsuario","subscribe","resp","navigateByUrl","selectors","decls","vars","consts","template","ctx"],"sourceRoot":"","sources":["C:\\Users\\victo\\OneDrive\\Escritorio\\TFG\\TFG-Código\\Frontend\\src\\app\\auth\\pages\\registro\\registro.component.ts","C:\\Users\\victo\\OneDrive\\Escritorio\\TFG\\TFG-Código\\Frontend\\src\\app\\auth\\pages\\registro\\registro.component.html"],"sourcesContent":["import { Component } from '@angular/core';\nimport {\n  FormBuilder,\n  FormControl,\n  FormGroup,\n  Validators,\n} from '@angular/forms';\nimport { DateAdapter } from '@angular/material/core';\nimport { Router } from '@angular/router';\nimport { FileValidator } from 'ngx-material-file-input';\nimport { AuthService } from '../../services/auth.service';\n\n@Component({\n  selector: 'app-registro',\n  templateUrl: './registro.component.html',\n  styleUrls: ['./registro.component.css'],\n})\nexport class RegistroComponent {\n  hide: boolean = true;\n  hideRepetida: boolean = true;\n\n  constructor(\n    private _formBuilder: FormBuilder,\n    private date: DateAdapter<Date>,\n    private authService: AuthService,\n    private router: Router\n  ) {\n    // Ponemos en los calendarios el lunes como primer día\n    date.getFirstDayOfWeek = () => 1;\n  }\n  datosPersonales: FormGroup = this._formBuilder.group({\n    nombre: [],\n    fechaNacimiento: [],\n    fotografia: ['', [FileValidator.maxContentSize(20000)]],\n  });\n\n  inicioSesion: FormGroup = this._formBuilder.group({\n    email: [],\n    password: new FormControl('', [\n      Validators.required,\n      Validators.minLength(6),\n    ]),\n    passwordRepetida: [],\n  });\n\n  get password() {\n    return this.inicioSesion.get('password');\n  }\n\n  get email() {\n    return this.inicioSesion.get('email');\n  }\n\n  async creaUsuario() {\n    if (this.datosPersonales.valid && this.inicioSesion.valid) {\n      (\n        await this.authService.registraUsuario(\n          this.datosPersonales,\n          this.inicioSesion\n        )\n      ).subscribe((resp) => {\n        this.router.navigateByUrl('auth/login');\n      });\n    }\n  }\n}\n","<mat-vertical-stepper [linear]=\"false\" #stepper class=\"relleno\">\n  <mat-step [stepControl]=\"datosPersonales\">\n    <form [formGroup]=\"datosPersonales\">\n      <ng-template matStepLabel>Datos personales</ng-template>\n      <mat-form-field>\n        <input\n          autocomplete=\"off\"\n          matInput\n          placeholder=\"Nombre\"\n          formControlName=\"nombre\"\n          required\n        />\n      </mat-form-field>\n      <mat-form-field color=\"accent\" appearance=\"fill\">\n        <mat-label>Fecha de nacimiento</mat-label>\n        <input\n          matInput\n          [matDatepicker]=\"fechaNacimiento\"\n          formControlName=\"fechaNacimiento\"\n          datePickerFormat=\"DD/MM/YYYY\"\n          readonly\n          required\n        />\n        <mat-hint>MM/DD/YYYY</mat-hint>\n        <mat-datepicker-toggle\n          matSuffix\n          [for]=\"fechaNacimiento\"\n        ></mat-datepicker-toggle>\n        <mat-datepicker #fechaNacimiento></mat-datepicker>\n      </mat-form-field>\n      <mat-form-field>\n        <ngx-mat-file-input\n          type=\"file\"\n          name=\"fotografia\"\n          enctype=\"multipart/form-data\"\n          formControlName=\"fotografia\"\n          placeholder=\"Imagen de perfil (JPG)\"\n          [accept]=\"'.jpg'\"\n          maxContentSize=\"20000\"\n        ></ngx-mat-file-input>\n        <mat-icon matSuffix class=\"carpeta\">folder_shared</mat-icon>\n        <mat-hint>Opcional</mat-hint>\n      </mat-form-field>\n\n      <div>\n        <button mat-raised-button color=\"primary\" matStepperNext>\n          Siguiente\n        </button>\n      </div>\n    </form>\n  </mat-step>\n  <mat-step [stepControl]=\"inicioSesion\">\n    <form [formGroup]=\"inicioSesion\" class=\"inicio_sesion\">\n      <ng-template matStepLabel>Configuración de inicio de sesión</ng-template>\n      <mat-form-field>\n        <input\n          matInput\n          placeholder=\"tucorreo@dominio.com\"\n          formControlName=\"email\"\n          pattern=\"[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\\.[a-zA-Z]{2,}\"\n          required\n        />\n        <div *ngIf=\"email!.invalid && inicioSesion.touched\">\n          <h4 class=\"terminarError\">El correo debe estar bien formado</h4>\n        </div>\n      </mat-form-field>\n      <mat-form-field appearance=\"fill\">\n        <mat-label>Introduce tu contraseña</mat-label>\n        <input\n          type=\"password\"\n          formControlName=\"password\"\n          matInput\n          [type]=\"hide ? 'password' : 'text'\"\n          required=\"\"\n        />\n        <div *ngIf=\"password!.invalid && inicioSesion.touched\">\n          <h4 class=\"terminarError\">\n            La contraseña debe tener 6 caracteres mínimo.\n          </h4>\n        </div>\n        <button\n          type=\"button\"\n          mat-icon-button\n          matSuffix\n          (click)=\"hide = !hide\"\n          [attr.aria-label]=\"'Hide password'\"\n          [attr.aria-pressed]=\"hide\"\n        >\n          <mat-icon>{{ hide ? \"visibility_off\" : \"visibility\" }}</mat-icon>\n        </button>\n      </mat-form-field>\n      <mat-form-field appearance=\"fill\">\n        <mat-label>Repite tu contraseña</mat-label>\n        <input\n          type=\"password\"\n          formControlName=\"passwordRepetida\"\n          matInput\n          [type]=\"hideRepetida ? 'password' : 'text'\"\n          required=\"\"\n        />\n        <button\n          type=\"button\"\n          mat-icon-button\n          matSuffix\n          (click)=\"hideRepetida = !hideRepetida\"\n          [attr.aria-label]=\"'Hide password'\"\n          [attr.aria-pressed]=\"hideRepetida\"\n        >\n          <mat-icon>{{\n            hideRepetida ? \"visibility_off\" : \"visibility\"\n          }}</mat-icon>\n        </button>\n      </mat-form-field>\n      <div>\n        <button mat-raised-button color=\"primary\" matStepperPrevious>\n          Atrás\n        </button>\n        <button\n          mat-raised-button\n          color=\"primary\"\n          matStepperNext\n          class=\"boton_derecho\"\n        >\n          Siguiente\n        </button>\n      </div>\n    </form>\n  </mat-step>\n  <mat-step>\n    <ng-template matStepLabel>Terminar</ng-template>\n    <div\n      *ngIf=\"inicioSesion.valid && datosPersonales.valid; else elementoOculto\"\n    >\n      <h3 class=\"terminar\">\n        ¡Has rellenado todos los datos! Pulsa en continuar para registrar tu\n        cuenta.\n      </h3>\n    </div>\n    <ng-template #elementoOculto>\n      <h3 class=\"terminarError\">\n        Faltan campos requeridos por rellenar. Asegurate de que están\n        rellenados.\n      </h3></ng-template\n    >\n\n    <div>\n      <button mat-raised-button color=\"primary\" matStepperPrevious>\n        Atrás\n      </button>\n      <button\n        mat-raised-button\n        color=\"primary\"\n        (click)=\"creaUsuario()\"\n        class=\"boton_derecho\"\n      >\n        Continuar\n      </button>\n    </div>\n  </mat-step>\n</mat-vertical-stepper>\n"]},"metadata":{},"sourceType":"module","externalDependencies":[]}