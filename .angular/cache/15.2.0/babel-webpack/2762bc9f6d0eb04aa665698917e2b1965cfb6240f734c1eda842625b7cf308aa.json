{"ast":null,"code":"import _asyncToGenerator from \"C:/Users/victo/OneDrive/Escritorio/TFG/TFG-C\\xF3digo/Frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport { HttpHeaders } from '@angular/common/http';\nimport { of } from 'rxjs';\nimport { catchError, map, tap } from 'rxjs/operators';\nimport { environment } from 'src/environments/environment';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/common/http\";\nexport class AuthService {\n  constructor(http) {\n    this.http = http;\n    this.baseUrl = environment.baseUrl;\n  }\n  get auth() {\n    return {\n      ...this._auth\n    };\n  }\n  get usuario() {\n    return {\n      ...this._usuario\n    };\n  }\n  subirImagen(imagen) {\n    var _this = this;\n    return _asyncToGenerator(function* () {\n      return new Promise((resolve, reject) => {\n        const reader = new FileReader();\n        reader.readAsArrayBuffer(imagen);\n        reader.onloadend = () => {\n          const buffer = reader.result;\n          const imagen_array = Array.from(new Uint8Array(buffer));\n          const imagen_base64 = btoa(String.fromCharCode(...imagen_array));\n          const url = `${_this.baseUrl}/subir-imagen`;\n          const body = {\n            imagen: imagen_base64\n          };\n          _this.http.post(url, body).toPromise().then(response => resolve(response)).catch(error => reject(error));\n        };\n        reader.onerror = error => {\n          reject(error);\n        };\n      });\n    })();\n  }\n  registraUsuario(datosPersonales, inicioSesion) {\n    var _this2 = this;\n    return _asyncToGenerator(function* () {\n      let idImagen;\n      if (datosPersonales.controls['fotografia'].value !== null) {\n        yield _this2.subirImagen(datosPersonales.controls['fotografia'].value._files[0]).then(resp => idImagen = resp.idImagen);\n      } else {\n        // TODO: Asignar fotografia predeterminada\n      }\n      let anio = datosPersonales.controls['fechaNacimiento'].value.getFullYear();\n      let dia = datosPersonales.controls['fechaNacimiento'].value.getDay();\n      let mes = datosPersonales.controls['fechaNacimiento'].value.getMonth();\n      const fechaNacimientoParseada = `${anio}-${mes}-${dia}`;\n      let body = {\n        nombre: datosPersonales.controls['nombre'].value,\n        email: inicioSesion.controls['email'].value,\n        password: inicioSesion.controls['password'].value,\n        listaRestaurantesFavoritos: [],\n        fotografia: idImagen,\n        listaOpiniones: [],\n        fechaNacimiento: fechaNacimientoParseada,\n        google: false\n      };\n      return _this2.http.post(`${_this2.baseUrl}/nuevo-usuario`, body).pipe(map(resp => resp.ok));\n    })();\n  }\n  verificaAutenticacion() {\n    if (!localStorage.getItem('token')) {\n      return of(false); // Creamos el observable del false\n    }\n\n    return this.http.get(`${this.baseUrl}/login`).pipe(map(auth => {\n      this._auth = auth;\n      return true;\n    }));\n  }\n  login(email, password) {\n    const body = {\n      email,\n      password\n    };\n    return this.http.post(`${this.baseUrl}/login`, body).pipe(tap(resp => {\n      if (resp.ok) {\n        localStorage.setItem('token', resp.token);\n        this._usuario = {\n          nombre: resp.nombre,\n          uid: resp.uid,\n          email: resp.email\n        };\n      }\n    }), map(resp => resp.ok));\n  }\n  logOut() {\n    localStorage.removeItem('token');\n    this._auth = undefined;\n  }\n  validarToken() {\n    const url = `${this.baseUrl}/auth/renovar`;\n    const headers = new HttpHeaders().set('x-token', localStorage.getItem('token') || '');\n    return this.http.get(url, {\n      headers\n    }).pipe(map(resp => {\n      localStorage.setItem('token', resp.token);\n      this._usuario = {\n        nombre: resp.nombre,\n        uid: resp.uid,\n        email: resp.email\n      };\n      return resp.ok;\n    }), catchError(err => of(false)));\n  }\n  registraRestaurante(datosPersonales, datosRestaurante, carta, inicioSesion) {\n    var _this3 = this;\n    return _asyncToGenerator(function* () {\n      let idImagen;\n      if (datosRestaurante.controls['fotografia'].value !== '') {\n        yield _this3.subirImagen(datosRestaurante.controls['fotografia'].value._files[0]).then(resp => idImagen = resp.idImagen);\n      } else {\n        // TODO: Asignar fotografia predeterminada\n      }\n      const bodyCarta = _this3.construyeCarta(carta);\n      let body = {\n        nombrePropietario: datosPersonales.controls['nombrePropietario'].value,\n        nombre: datosRestaurante.controls['nombre'].value,\n        ciudad: datosRestaurante.controls['ciudad'].value,\n        calle: datosRestaurante.controls['calle'].value,\n        numero: datosRestaurante.controls['numero'].value,\n        tematica: datosRestaurante.controls['tematica'].value,\n        horario: datosRestaurante.controls['horario'].value,\n        fotografia: idImagen,\n        carta: bodyCarta,\n        email: inicioSesion.controls['email'].value,\n        password: inicioSesion.controls['password'].value\n      };\n      return _this3.http.post(`${_this3.baseUrl}/nuevo-restaurante`, body).pipe(map(resp => resp.ok));\n    })();\n  }\n  // Array de Arrays con valores [nombrePlato,precio,tipo]\n  construyeCarta(carta) {\n    // Filtrar por tipos y añadirlos al tipo correspondiente en el objeto bodyCarta\n    const entrantes = carta.controls['platos'].value;\n    console.log(entrantes);\n    const bodyCarta = {\n      entrantes: [],\n      primerosPlatos: [],\n      segundosPlatos: [],\n      postres: [],\n      bebidas: []\n    };\n  }\n}\nAuthService.ɵfac = function AuthService_Factory(t) {\n  return new (t || AuthService)(i0.ɵɵinject(i1.HttpClient));\n};\nAuthService.ɵprov = /*@__PURE__*/i0.ɵɵdefineInjectable({\n  token: AuthService,\n  factory: AuthService.ɵfac,\n  providedIn: 'root'\n});","map":{"version":3,"mappings":"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","names":["HttpHeaders","of","catchError","map","tap","environment","AuthService","constructor","http","baseUrl","auth","_auth","usuario","_usuario","subirImagen","imagen","Promise","resolve","reject","reader","FileReader","readAsArrayBuffer","onloadend","buffer","result","imagen_array","Array","from","Uint8Array","imagen_base64","btoa","String","fromCharCode","url","body","post","toPromise","then","response","catch","error","onerror","registraUsuario","datosPersonales","inicioSesion","idImagen","controls","value","_files","resp","anio","getFullYear","dia","getDay","mes","getMonth","fechaNacimientoParseada","nombre","email","password","listaRestaurantesFavoritos","fotografia","listaOpiniones","fechaNacimiento","google","pipe","ok","verificaAutenticacion","localStorage","getItem","get","login","setItem","token","uid","logOut","removeItem","undefined","validarToken","headers","set","err","registraRestaurante","datosRestaurante","carta","bodyCarta","construyeCarta","nombrePropietario","ciudad","calle","numero","tematica","horario","entrantes","console","log","primerosPlatos","segundosPlatos","postres","bebidas","factory","providedIn"],"sourceRoot":"","sources":["C:\\Users\\victo\\OneDrive\\Escritorio\\TFG\\TFG-Código\\Frontend\\src\\app\\auth\\services\\auth.service.ts"],"sourcesContent":["import { HttpClient, HttpHeaders } from '@angular/common/http';\nimport { Injectable } from '@angular/core';\nimport { FormGroup } from '@angular/forms';\nimport { Observable, of } from 'rxjs';\nimport { catchError, map, tap } from 'rxjs/operators';\nimport { environment } from 'src/environments/environment';\nimport { Auth, AuthResponse, Usuario } from '../interfaces/auth.interfaces';\n\n@Injectable({\n  providedIn: 'root',\n})\nexport class AuthService {\n  private baseUrl: string = environment.baseUrl;\n  private _auth!: Auth | undefined;\n  private _usuario!: Usuario;\n\n  constructor(private http: HttpClient) {}\n\n  get auth(): Auth {\n    return { ...this._auth! };\n  }\n\n  get usuario(): Usuario {\n    return { ...this._usuario };\n  }\n\n  async subirImagen(imagen: File): Promise<any> {\n    return new Promise((resolve, reject) => {\n      const reader = new FileReader();\n      reader.readAsArrayBuffer(imagen);\n      reader.onloadend = () => {\n        const buffer = reader.result as ArrayBuffer;\n        const imagen_array = Array.from(new Uint8Array(buffer));\n        const imagen_base64 = btoa(String.fromCharCode(...imagen_array));\n        const url = `${this.baseUrl}/subir-imagen`;\n        const body = { imagen: imagen_base64 };\n        this.http\n          .post(url, body)\n          .toPromise()\n          .then((response) => resolve(response))\n          .catch((error) => reject(error));\n      };\n      reader.onerror = (error) => {\n        reject(error);\n      };\n    });\n  }\n  async registraUsuario(datosPersonales: FormGroup, inicioSesion: FormGroup) {\n    let idImagen;\n    if (datosPersonales.controls['fotografia'].value !== null) {\n      await this.subirImagen(\n        datosPersonales.controls['fotografia'].value._files[0]\n      ).then((resp) => (idImagen = resp.idImagen));\n    } else {\n      // TODO: Asignar fotografia predeterminada\n    }\n\n    let anio = datosPersonales.controls['fechaNacimiento'].value.getFullYear();\n    let dia = datosPersonales.controls['fechaNacimiento'].value.getDay();\n    let mes = datosPersonales.controls['fechaNacimiento'].value.getMonth();\n    const fechaNacimientoParseada = `${anio}-${mes}-${dia}`;\n\n    let body: any = {\n      nombre: datosPersonales.controls['nombre'].value,\n      email: inicioSesion.controls['email'].value,\n      password: inicioSesion.controls['password'].value,\n      listaRestaurantesFavoritos: [],\n      fotografia: idImagen,\n      listaOpiniones: [],\n      fechaNacimiento: fechaNacimientoParseada,\n      google: false,\n    };\n\n    return this.http\n      .post<any>(`${this.baseUrl}/nuevo-usuario`, body)\n      .pipe(map((resp) => resp.ok));\n  }\n\n  verificaAutenticacion(): Observable<boolean> {\n    if (!localStorage.getItem('token')) {\n      return of(false); // Creamos el observable del false\n    }\n    return this.http.get<Auth>(`${this.baseUrl}/login`).pipe(\n      map((auth) => {\n        this._auth = auth;\n        return true;\n      })\n    );\n  }\n\n  login(email: string, password: string) {\n    const body = { email, password };\n    return this.http.post<AuthResponse>(`${this.baseUrl}/login`, body).pipe(\n      tap((resp) => {\n        if (resp.ok) {\n          localStorage.setItem('token', resp.token!);\n          this._usuario = {\n            nombre: resp.nombre!,\n            uid: resp.uid!,\n            email: resp.email!,\n          };\n        }\n      }),\n      map((resp) => resp.ok)\n    );\n  }\n\n  logOut() {\n    localStorage.removeItem('token');\n    this._auth = undefined;\n  }\n\n  validarToken(): Observable<boolean> {\n    const url = `${this.baseUrl}/auth/renovar`;\n    const headers = new HttpHeaders().set(\n      'x-token',\n      localStorage.getItem('token') || ''\n    );\n\n    return this.http.get<AuthResponse>(url, { headers }).pipe(\n      map((resp) => {\n        localStorage.setItem('token', resp.token!);\n        this._usuario = {\n          nombre: resp.nombre!,\n          uid: resp.uid!,\n          email: resp.email!,\n        };\n        return resp.ok;\n      }),\n      catchError((err) => of(false))\n    );\n  }\n\n  async registraRestaurante(\n    datosPersonales: FormGroup,\n    datosRestaurante: FormGroup,\n    carta: FormGroup,\n    inicioSesion: FormGroup\n  ) {\n    let idImagen;\n    if (datosRestaurante.controls['fotografia'].value !== '') {\n      await this.subirImagen(\n        datosRestaurante.controls['fotografia'].value._files[0]\n      ).then((resp) => (idImagen = resp.idImagen));\n    } else {\n      // TODO: Asignar fotografia predeterminada\n    }\n    const bodyCarta = this.construyeCarta(carta);\n\n    let body: any = {\n      nombrePropietario: datosPersonales.controls['nombrePropietario'].value,\n      nombre: datosRestaurante.controls['nombre'].value,\n      ciudad: datosRestaurante.controls['ciudad'].value,\n      calle: datosRestaurante.controls['calle'].value,\n      numero: datosRestaurante.controls['numero'].value,\n      tematica: datosRestaurante.controls['tematica'].value,\n      horario: datosRestaurante.controls['horario'].value,\n      fotografia: idImagen,\n      carta: bodyCarta,\n      email: inicioSesion.controls['email'].value,\n      password: inicioSesion.controls['password'].value,\n    };\n\n    return this.http\n      .post<any>(`${this.baseUrl}/nuevo-restaurante`, body)\n      .pipe(map((resp) => resp.ok));\n  }\n\n  // Array de Arrays con valores [nombrePlato,precio,tipo]\n  construyeCarta(carta: FormGroup) {\n    // Filtrar por tipos y añadirlos al tipo correspondiente en el objeto bodyCarta\n    const entrantes = carta.controls['platos'].value;\n    console.log(entrantes);\n    const bodyCarta = {\n      entrantes: [],\n      primerosPlatos: [],\n      segundosPlatos: [],\n      postres: [],\n      bebidas: [],\n    };\n  }\n}\n"]},"metadata":{},"sourceType":"module","externalDependencies":[]}