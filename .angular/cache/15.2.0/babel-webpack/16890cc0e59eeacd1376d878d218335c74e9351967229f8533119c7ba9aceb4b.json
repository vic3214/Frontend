{"ast":null,"code":"import { tap } from 'rxjs/operators';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"../services/auth.service\";\nimport * as i2 from \"@angular/router\";\nexport class ValidarTokenGuard {\n  constructor(authService, router) {\n    this.authService = authService;\n    this.router = router;\n  }\n  canActivate() {\n    console.log('canActivate');\n    return this.authService.validarToken().pipe(tap(valid => {\n      if (!valid) {\n        this.router.navigateByUrl('/auth/login');\n      }\n    }));\n  }\n  canLoad() {\n    console.log('canload');\n    return this.authService.validarToken().pipe(tap(valid => {\n      if (!valid) {\n        this.router.navigateByUrl('/auth/login');\n      }\n    }));\n  }\n}\nValidarTokenGuard.ɵfac = function ValidarTokenGuard_Factory(t) {\n  return new (t || ValidarTokenGuard)(i0.ɵɵinject(i1.AuthService), i0.ɵɵinject(i2.Router));\n};\nValidarTokenGuard.ɵprov = /*@__PURE__*/i0.ɵɵdefineInjectable({\n  token: ValidarTokenGuard,\n  factory: ValidarTokenGuard.ɵfac,\n  providedIn: 'root'\n});","map":{"version":3,"mappings":"AAIA,SAASA,GAAG,QAAQ,gBAAgB;;;;AAMpC,OAAM,MAAOC,iBAAiB;EAC5BC,YAAoBC,WAAwB,EAAUC,MAAc;IAAhD,gBAAW,GAAXD,WAAW;IAAuB,WAAM,GAANC,MAAM;EAAW;EAEvEC,WAAW;IACTC,OAAO,CAACC,GAAG,CAAC,aAAa,CAAC;IAC1B,OAAO,IAAI,CAACJ,WAAW,CAACK,YAAY,EAAE,CAACC,IAAI,CACzCT,GAAG,CAAEU,KAAK,IAAI;MACZ,IAAI,CAACA,KAAK,EAAE;QACV,IAAI,CAACN,MAAM,CAACO,aAAa,CAAC,aAAa,CAAC;;IAE5C,CAAC,CAAC,CACH;EACH;EAEAC,OAAO;IACLN,OAAO,CAACC,GAAG,CAAC,SAAS,CAAC;IACtB,OAAO,IAAI,CAACJ,WAAW,CAACK,YAAY,EAAE,CAACC,IAAI,CACzCT,GAAG,CAAEU,KAAK,IAAI;MACZ,IAAI,CAACA,KAAK,EAAE;QACV,IAAI,CAACN,MAAM,CAACO,aAAa,CAAC,aAAa,CAAC;;IAE5C,CAAC,CAAC,CACH;EACH;;AAvBWV,iBAAiB;mBAAjBA,iBAAiB;AAAA;AAAjBA,iBAAiB;SAAjBA,iBAAiB;EAAAY,SAAjBZ,iBAAiB;EAAAa,YAFhB;AAAM","names":["tap","ValidarTokenGuard","constructor","authService","router","canActivate","console","log","validarToken","pipe","valid","navigateByUrl","canLoad","factory","providedIn"],"sourceRoot":"","sources":["C:\\Users\\victo\\OneDrive\\Escritorio\\TFG\\TFG-Código\\Frontend\\src\\app\\auth\\guards\\validar-token.guard.ts"],"sourcesContent":["import { Injectable } from '@angular/core';\nimport { CanActivate, CanLoad, Router } from '@angular/router';\n\nimport { Observable } from 'rxjs';\nimport { tap } from 'rxjs/operators';\nimport { AuthService } from '../services/auth.service';\n\n@Injectable({\n  providedIn: 'root',\n})\nexport class ValidarTokenGuard implements CanActivate, CanLoad {\n  constructor(private authService: AuthService, private router: Router) {}\n\n  canActivate(): Observable<boolean> | boolean {\n    console.log('canActivate');\n    return this.authService.validarToken().pipe(\n      tap((valid) => {\n        if (!valid) {\n          this.router.navigateByUrl('/auth/login');\n        }\n      })\n    );\n  }\n\n  canLoad(): Observable<boolean> | boolean {\n    console.log('canload');\n    return this.authService.validarToken().pipe(\n      tap((valid) => {\n        if (!valid) {\n          this.router.navigateByUrl('/auth/login');\n        }\n      })\n    );\n  }\n}\n"]},"metadata":{},"sourceType":"module","externalDependencies":[]}